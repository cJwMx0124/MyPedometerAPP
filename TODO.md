# 项目优化待办列表 (Project Improvement TODO List)

本文档记录了当前计步器项目在算法层面可行的优化方向，以便未来进行迭代和探索。

---

### 近期优化 (Short-term / High-Impact)

这些是投入产出比较高的优化点，能显著提升现有算法的鲁棒性。

- [ ] **改进峰值检测算法 (Improve Peak Detection Algorithm)**
  - [ ] **分析波峰形态**: 不仅判断波峰的“高度”（是否超过阈值），也增加对“宽度”（持续时间）和“陡峭度”的判断，以过滤掉尖锐的冲击或缓慢的晃动，使其更像一个真实的脚步波形。
  - [ ] **实现动态阈值**: 当前的 `stepThreshold` 是一个固定值。可以设计一个算法，根据用户最近一段时间的平均步幅力度，动态地调整此阈值，以适应慢走、快走、跑步等不同状态。

---

### 中期探索 (Medium-term / Advanced)

这些是更复杂的算法，需要更多的研究和实现成本，但能带来更大的性能提升。

- [ ] **引入更优的滤波器 (Introduce Better Filters)**
  - [ ] **研究巴特沃斯（Butterworth）滤波器**: 替换当前简单的高通滤波器。一个设计良好的带通（Band-pass）滤波器可以更精准地提取出人类步频（1-5Hz）的信号，极大地滤除其他频率的噪声。
  - [ ] **研究卡尔曼（Kalman）滤波器**: 如果考虑融合陀螺仪（Gyroscope）数据，可以研究使用卡尔曼滤波器来获得最优的线性加速度估计，这是目前最精确的去重力方法之一。

- [ ] **引入频域分析 (Introduce Frequency-Domain Analysis)**
  - [ ] **使用FFT（快速傅里叶变换）**: 对短时间窗（如1-2秒）内的信号进行FFT分析，通过检查在1-5Hz频段内是否存在显著的能量峰值，来判断用户是否在进行“规律性”的步行/跑步。这对于从根本上排除乘车颠簸等非规律性干扰非常有效。

---

### 长期方向 (Long-term / State-of-the-Art)

这是将项目推向专业级水准的最终方案。

- [ ] **探索机器学习方案 (Explore Machine Learning Approach)**
  - [ ] **数据采集与标注**: 采集并手动标记大量的、包含多种场景（走路、跑步、上下楼、坐车、静止等）的传感器数据，构建一个高质量的数据集。
  - [ ] **特征工程与模型训练**: 从数据中提取时域和频域特征，训练一个分类模型（如SVM、随机森林或LSTM神经网络），用它来代替当前所有基于规则的算法，实现对“步态”的精准识别。
